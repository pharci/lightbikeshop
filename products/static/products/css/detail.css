/* ===== Product Detail – full CSS ===== */

:root{
  --radius: 15px;
  --bg-white: #fff;
  --text: #000;
  --muted: #6c757d;
  --shadow: 0 1px 4px rgba(0,0,0,.06);
  --border: #e8eaef;
  --brand: rgba(159,190,241,1);
  --btn-height: 44px;
}

/* Layout */
.variant-page__grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.25rem;
}
@media (min-width: 992px){
  .variant-page__grid {
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    align-items: start;
  }
}




/* === ГРИД С КВАДРАТНЫМ ФОТО СЛЕВА === */
.variant-gallery__grid{
  display: grid;
  grid-template-columns: minmax(0,1fr) 96px; /* слева фото, справа рельса */
  gap: 12px;
  align-items: start;
}
.variant-gallery__grid > *{ min-width:0; min-height:0; }

/* Левый блок — квадрат, полностью видимое изображение */
.variant-gallery__main{
  width:100%;
  aspect-ratio: 1 / 1;     /* ← именно это задаёт высоту строки */
  border-radius: 14px;
  overflow:hidden;
  touch-action: pan-y;
}
.variant-gallery__main .swiper-wrapper,
.variant-gallery__main .swiper-slide{ height:100%; }
.variant-gallery__main .swiper-slide{ display:grid; place-items:center; background:#f7f8fa; }
.variant-gallery__image{ width:100%; height:100%; object-fit:contain; display:block; }

/* Правая колонка-ячейка */
.variant-gallery__rail-cell{
  position: relative;      /* якорь для абсолютного скроллера */
  height: 100%;            /* высота ровно как у строки (квадрата слева) */
  min-height: 0;           /* важно для Firefox */
  overflow: visible;       /* полоса скролла не режется */
}

/* Сам скролл-контейнер — полностью абсолютный, НЕ влияет на высоту строки */
.rail{
  position: absolute;
  inset: 0;                /* top:0; right:0; bottom:0; left:0 */
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;        /* ← появится вертикальный скролл */
  overflow-x: hidden;
  margin-right: -2px;
  scrollbar-width: thin;
  scrollbar-color: #888b90 transparent;
}
.rail::-webkit-scrollbar {
  width: 6px; /* стандарт ~16px */
}
.rail::-webkit-scrollbar-thumb {
  background: #999;
  border-radius: 10px;     /* скругление */
}
.rail::-webkit-scrollbar-thumb:hover {
  background: #777;
}
/* миниатюры — квадраты */
.rail__item{
  appearance:none;
  border: none;
  background:#fff;
  padding:0; margin:0;
  width:84px;          
  aspect-ratio:1/1;
  border-radius:10px;
  overflow:hidden;
  cursor:pointer;
  opacity:.7;
  transition:opacity .15s ease, border-color .15s ease;
  flex:0 0 auto;
  position: relative;
}
.rail__item:hover{ opacity:.9; }
.rail__item.is-active{ opacity:1; }
.rail__item.is-active::after {
  content: "";
  position: absolute;
  inset: 0px;                   /* рамка рисуется ВНУТРИ, отступ 2px */
  border: 1px solid #111;       /* собственно «обводка» */
  border-radius: 10px;
  pointer-events: none;         /* не мешает кликам */
  z-index: 1;                   /* поверх картинки */
}
.rail__thumb{ width:100%; height:100%; object-fit:cover; display:block; border-radius: 10px; }

/* Мобила: превью внизу, горизонтальный скролл, без абсолютного позиционирования */
@media (max-width: 720px){
  .variant-gallery__grid{ grid-template-columns:1fr; gap:8px; }
  .variant-gallery__rail-cell{
    position: static;
    height: auto;
  }
  .rail{
    position: static;
    display: flex;
    flex-direction: row;
    gap: 8px;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
  }
  .rail::-webkit-scrollbar{ height:8px; }
  .rail__item{ width:72px; aspect-ratio:1/1; scroll-snap-align:start; }
}

/* страховка для swiper */
.swiper{ overflow:hidden; width:100%; }





.variant-page__info {
  position: sticky;
}

/* Title */
.variant-page__title-wrap {
  display: inline-flex;
  border-radius: var(--radius);
  margin: 1.5rem 0 1rem;
}
.variant-page__title {
  margin: 0;
  font-weight: 700;
  font-size: 22px;
  color: #000;
  font-family: 'Comfortaa', system-ui, sans-serif;
}

/* Availability */
.variant-page__availability { display: flex; flex-direction: column; gap: .25rem;}
.availability__row {
  display: flex;
  align-items: center;
  font-size: 15px;
  gap: 4px; /* расстояние между текстом и числом */
}

.availability__place {
  color: var(--text);
  margin-right: 0; /* убираем старый отступ */
}

.availability__qty {
  color: var(--text);
  font-weight: 600;
  white-space: nowrap;
}

.availability__unit {
  margin-left: 2px; /* чуть меньше отступ от числа */
}

/* Fallback statuses */
.status { display: inline-flex; align-items: center; gap: .4rem; font-size: 15px; color: var(--text); }
.status__dot { width:7px; height:7px; border-radius:50%; display:inline-block; }
.status--on-order .status__dot{ background:#0d6efd; }
.status--soon     .status__dot{ background:#fd7e14; }
.status--out      .status__dot{ background:#dc3545; }
.status--in       .status__dot{ background: green; }

/* Price + Controls */
.variant-page__buy{ display:flex; align-items:center; gap:1rem; flex-wrap:nowrap; margin-top: 2rem; }
.price {
  color: #393D46;
  font-weight: 600;
  font-size: 32px;
  flex: 0 0 auto;
  margin: 0;
}
.buy__controls{
  flex:1 1 auto; min-width:0;
  display:flex; align-items:center; gap:.75rem;
}

.btn--disabled,
.btn--disabled:hover,
.btn--disabled:active {
  opacity: .55;
  cursor: not-allowed;
  background: #f3f4f6;
  color: #9aa0a6;
  border-color: #e5e7eb;
  transform: none;
  box-shadow: none;
}

/* Buttons (base) */
.btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 0 14px; /* убрали вертикальные паддинги, задаём фиксированную высоту */
  height: var(--btn-height);
  border-radius: var(--radius);
  text-decoration: none;
  cursor: pointer;
  border: 1px solid #111;
  background: transparent;
  color: #111;
  transition: background .15s ease, color .15s ease, border-color .15s ease, opacity .15s ease, transform .05s ease;
  user-select: none;
}
.btn:hover { background:#111; color:#fff; }
.btn:active { transform: translateY(1px); }
.btn:disabled { opacity:.5; cursor:not-allowed; }

/* Quantity control */
.qty {
  display: inline-grid;
  grid-auto-flow: column;
  gap: 5px;
  align-items: center;
}
.qty__btn {
  width: var(--btn-height);       /* ширина = высота */
  height: var(--btn-height);      /* такая же, как у основной кнопки */
  display: grid;
  place-items: center;
  font-size: 18px;
  border-radius: var(--radius);
  border: 1px solid #111;
  background: transparent;
  cursor: pointer;
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .05s ease;
  user-select: none;
}
.qty__btn:hover{ background:#111; color:#fff; }
.qty__btn:active{ transform: translateY(1px); }
.qty__btn:disabled{ opacity:.5; cursor:not-allowed; }
.qty__val{ min-width:30px; text-align:center; font-weight:600; font-size: 18px; }

/* Description */
.variant-page__description {
  margin-top: .5rem;
  font-size: 16px;
  line-height: 1.6;
  color: #1d1d1d;
}
.variant-page__description h1,
.variant-page__description h2,
.variant-page__description h3 { margin: .75rem 0 .5rem; }
.variant-page__description p { margin: .5rem 0; }
.variant-page__description ul, .variant-page__description ol { margin: .5rem 0 .5rem 1.25rem; }
.variant-page__description img { max-width:100%; height:auto; border-radius: 8px; }

/* Small helpers */
.hover-shadow { box-shadow: var(--shadow); }
.border { border: 1px solid var(--border); }
.visually-hidden{ position:absolute!important; height:1px;width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap; }

/* Focus states for a11y */
.btn:focus-visible,
.qty__btn:focus-visible {
  outline: 2px solid #111;
  outline-offset: 2px;
}

/* Compact tweaks on small screens */
@media (max-width: 480px){
  .variant-page__title { font-size: 20px; }
  .price{ font-size: 22px; }
  .qty__val{ min-width: 52px; }
}

/* Optional: subtle skeleton for image (while loading) */
.variant-page__image[loading],
.variant-page__image:is(.is-loading) {
  background: linear-gradient(90deg,#f2f3f5 25%,#e9ebef 37%,#f2f3f5 63%);
  background-size: 400% 100%;
  animation: shine 1.2s ease-in-out infinite;
}
@keyframes shine { 0%{background-position:100% 0} 100%{background-position:0 0} }





/* ===== Варианты (чипы) ===== */
.variant-picker{
  display: grid;
  gap: 16px;
  margin: 16px 0;
}

.variant-picker__row{
  display: grid;
  gap: 8px;
}

.variant-picker__label{
  font-size: 13px;
  color: var(--muted);
  margin-bottom: 4px;
}

.variant-picker__list{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.variant-chip{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--btn-height);
  padding: 0 14px;
  border-radius: 999px;
  font-size: 14px;
  line-height: 1.2;
  color: var(--text);
  background: var(--bg-white);
  border: 1px solid var(--border);
  text-decoration: none;
  transition: background .15s ease, color .15s ease, border-color .15s ease, transform .05s ease;
  cursor: pointer;
  white-space: nowrap;           /* ширина по содержимому */
}

.variant-chip:hover{
  background: #000;
  color: #fff;
  border-color: #000;
}

.variant-chip.is-active{
  background: #000;
  color: #fff;
  border-color: #000;
}

.variant-chip:active{
  transform: translateY(1px);
}

.variant-chip.is-disabled{
  opacity: .45;
}

.variant-chip:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px rgba(0,0,0,.12);
}







/* ==== Общие секции ==== */
.section { padding: 1rem; border-radius: 15px; background:#fff; border:1px solid var(--border, #e8eaef); box-shadow: var(--shadow, 0 1px 4px rgba(0,0,0,.06)); }

.section__head{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: .5rem;
}
.section__title{
  margin:0; font: 700 18px/1.2 'Comfortaa', system-ui, sans-serif; color:#000;
}

/* Ссылка-кнопка (тонкая) */
.link{
  appearance:none; border:none; background:none; padding:0; cursor:pointer;
  font: 500 14px/1 'Inter', system-ui, sans-serif;
}
.link--muted{ color: var(--muted, #6c757d); }
.link:hover{ text-decoration: underline; }

/* ==== Характеристики ==== */
.specs{
  display:grid; grid-template-columns: 1fr; gap: 8px;
}
.specs__row{
  display:grid; grid-template-columns: 250px 1fr; gap: 12px;
  align-items: baseline; border-bottom:1px dashed rgba(0,0,0,0.06); padding: 6px 0;
}
.specs__row:last-child{ border-bottom:none; }
@media (max-width: 480px){
  .specs__row{ grid-template-columns: 140px 1fr; }
}

.specs__key{
  color: var(--muted, #6c757d); font-size: 14px;
  overflow:hidden; text-overflow: ellipsis; white-space: nowrap;
}
.specs__val{
  color:#111; font-weight:600; font-size: 15px; line-height: 1.3;
  word-break: break-word;
}

/* ==== Описание (типографика) ==== */
.prose{
  color:#222; font: 400 15px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.prose p{ margin: .6em 0; }
.prose h3, .prose h4{ margin: 1.1em 0 .5em; }
.prose ul, .prose ol{ margin: .6em 0 .8em 1.1em; }
.prose li + li{ margin-top: .2em; }
.prose img{ max-width:100%; height:auto; border-radius: 10px; }
.prose a{ color: #0d6efd; }

/* Свертка длинного описания (красивый «фейд») */
.prose--clamp{
  max-height: 320px; overflow: hidden; position: relative;
}
.prose--clamp::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:64px;
  background: linear-gradient(to bottom, rgba(255,255,255,0), #fff 60%);
  pointer-events:none;
}
.prose--expanded{ max-height:none; }
.prose--expanded::after{ display:none; }

/* Кнопка «Показать полностью» меняет текст через [aria-expanded] */
.section__toggle[aria-expanded="true"]::after{ content:""; }



/* === Lightbox2: аккуратные правки, без ломания логики === */

/* Оверлей во весь вьюпорт (фикс только когда открыт) */
body.lb-open .lightboxOverlay{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
}

/* Ограничим размер картинки и контейнера, оставив место под подпись */
body.lb-open #lightbox .lb-outerContainer{
  max-width: 90vw;
  max-height: 80vh;          /* чтобы подпись поместилась ниже */
  box-sizing: border-box;
}

body.lb-open #lightbox img.lb-image{
  max-width: 100%;
  max-height: 80vh;
  width: auto;
  height: auto;
  display: block;
}

/* Подпись/счётчик/крестик — в отдельной плашке НИЖЕ картинки */
body.lb-open #lightbox .lb-dataContainer{
  position: static;          /* важно: НЕ fixed/absolute */
  max-width: 90vw;
  margin: 12px auto 0;       /* отступ от изображения */
}

body.lb-open #lightbox .lb-data{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  background: rgba(0,0,0,.75);
  padding: 8px 12px;
  border-radius: 8px;
  box-sizing: border-box;
}

/* Стрелки оставляем как у Lightbox (не переопределяем позицию) */
/* Можно только чуть поднять z-index, если вдруг перекрываются */
body.lb-open #lightbox .lb-nav{ z-index: 1001; }

/* (опционально) курсор-лупа на ссылках с картинками */
a[data-lightbox], .lb-link { cursor: zoom-in; }
