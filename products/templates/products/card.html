{% load static %}

{# Карточка одного Variant #}
<div class="product-card hover-shadow"
     data-url="{{ v.get_absolute_url }}">
  <div class="product-card__inner">

    <div class="product-card__image-wrapper">
      {% if v.new %}
        <div class="product-card__badges">
          <span class="product-badge" title="NEW">NEW</span>
        </div>
      {% endif %}

      <div class="swiper product-card__swiper">
        <div class="swiper-wrapper">
          {% if v.images.all %}
            {% for img in v.images.all %}
              <div class="swiper-slide">
                <img class="product-card__thumbnail"
                     src="{{ img.image.url }}"
                     alt="{{ img.alt|default:v.display_name }}"
                     loading="lazy">
              </div>
            {% endfor %}
          {% else %}
            <div class="swiper-slide">
              <img class="product-card__thumbnail"
                   src="{{ v.main_image_url }}"
                   alt="{{ v.display_name }}">
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    {# полоски-пагинации (если нужны) #}
    <div class="hover-strip{% if not v.images.all or v.images.count <= 1 %} is-empty{% endif %}" data-strip></div>

    <div class="product-card__content">
      <div class="product-card__status">
        {% if v.inventory %}
          <span class="status-label"><i class="status-dot" style="background-color: green;"></i>В наличии</span>
        {% else %}
          <span class="status-label"><i class="status-dot" style="background-color: red;"></i>Нет в наличии</span>
        {% endif %}
      </div>

      <p class="product-card__title">{{ v.display_name }}</p>

      <div class="product-card__price-block">
        <h5 class="product-card__price">{{ v.price|floatformat:"0" }} ₽</h5>
      </div>
    </div>

  </div>
</div>